<div class="w-full rounded-[50px] bg-white]">
  <div class="w-full flex items-center">
    <span class="block text-2xl lg:text-[32px] font-bold mr-5">{{couponId != "schoolsdetail" ? "Edit" : "Add"}} Product Coupon</span>
    <button type="button" [routerLink]="'/schools'" class="flex items-center border-2 border-primary rounded-lg px-6 py-2 outline-none text-primary bg-white anim group ml-auto mr-5">
      <span class="text-base font-medium leading-[22px] text-primary bg-white anim">Cancel</span>
    </button>
    <button type="button" mat-flat-button (click)="onSubmitAction()" class="flex items-center border-2 border-primary rounded-lg px-6 py-2 outline-none bg-primary hover:bg-white anim group">
      <span class="text-base font-medium leading-[22px] text-white group-hover:text-primary anim">Save</span>
      <span class="block" *ngIf="isBtnLoading">
        <svg class="animate-spin -mr-1 ml-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25 stroke-white group-hover:stroke-primary anim" cx="12" cy="12" r="10" stroke-width="4"></circle> <path class="opacity-75 fill-white group-hover:fill-primary anim" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg>
      </span>
    </button>
  </div>
  <form class="flex flex-wrap coupon-form -mx-2.5 mt-6 xl:mt-8" #couponNgForm="ngForm" [formGroup]="productCouponForm" (ngSubmit)="onSubmitAction()">
    <div class="w-full lg:w-1/4 relative pb-6 px-2.5 pt-0">
      <label for="item_name" class="block text-16 text-gray_1 font-semibold pb-2">School Name<span class="absolute top-0 text-red-600 text-[18] font-bold">&nbsp;*</span></label>
      <input type="text" pInputText [formControlName]="'name'" class="w-full text-16 xl:text-lg border border-light_blue text-dark placeholder:text-t3 rounded-lg outline-none py-2 xl:py-3 px-4" placeholder="Enter school name">
      <span class="error-message block absolute bottom-0 left-2.5 text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('name').hasError('required') && (productCouponForm.get('name').dirty || productCouponForm.get('name').touched)">Coupon name is required.</span>
    </div>
    <div class="w-full lg:w-1/4 relative pb-6 px-2.5 pt-0">
      <label for="item_name" class="block text-16 text-gray_1 font-semibold pb-2">Phone No.<span class="absolute top-0 text-red-600 text-[18] font-bold">&nbsp;*</span></label>
      <input type="text" pInputText [formControlName]="'coupon_code'" class="w-full text-16 xl:text-lg border border-light_blue text-dark placeholder:text-t3 rounded-lg outline-none py-2 xl:py-3 px-4" placeholder="Enter phone no" >
      <span class="error-message block absolute bottom-0 left-2.5 text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('coupon_code').hasError('required') && (productCouponForm.get('coupon_code').dirty || productCouponForm.get('coupon_code').touched)">Coupon code is required.</span>
    </div>
    <div class="w-full lg:w-1/4 relative pb-6 px-2.5 pt-0">
      <label for="item_name" class="block text-16 text-gray_1 font-semibold pb-2">Email:<span class="absolute top-0 text-red-600 text-[18] font-bold">&nbsp;*</span></label>
      <input type="text" pInputText [formControlName]="'coupon_code'" class="w-full text-16 xl:text-lg border border-light_blue text-dark placeholder:text-t3 rounded-lg outline-none py-2 xl:py-3 px-4" placeholder="Enter email" >
      <span class="error-message block absolute bottom-0 left-2.5 text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('coupon_code').hasError('required') && (productCouponForm.get('coupon_code').dirty || productCouponForm.get('coupon_code').touched)">Coupon code is required.</span>
    </div>
    <div class="w-full lg:w-1/4 relative pb-6 px-2.5 pt-0">
      <label for="item_name" class="block text-16 text-gray_1 font-semibold pb-2">Address</label>
      <input type="text" pInputText [formControlName]="'coupon_code'" class="w-full text-16 xl:text-lg border border-light_blue text-dark placeholder:text-t3 rounded-lg outline-none py-2 xl:py-3 px-4" placeholder="Enter address" >
      <span class="error-message block absolute bottom-0 left-2.5 text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('coupon_code').hasError('required') && (productCouponForm.get('coupon_code').dirty || productCouponForm.get('coupon_code').touched)">Coupon code is required.</span>
    </div>
    <div class="w-full lg:w-1/4 relative pb-6 px-2.5 pt-0">
      <label for="item_name" class="block text-16 text-gray_1 font-semibold pb-2">Currency Type<span class="absolute top-0 text-red_1 text-[18] font-bold">&nbsp;*</span></label>
      <mat-form-field appearance="outline" class="w-full">
        <mat-select placeholder="Currency Type" [formControlName]="'currency'">
          <mat-option [value]="'USD'">USD (&#x24;)</mat-option>
          <mat-option [value]="'INR'">INR (&#x20B9;)</mat-option>
        </mat-select>
      </mat-form-field>
      <span class="error-message block absolute bottom-0 left-2.5 text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('currency').hasError('required') && (productCouponForm.get('currency').dirty || productCouponForm.get('currency').touched)">Currency type is required.</span>
    </div>
    <div class="w-full lg:w-1/4 relative pb-b px-2.5 pt-0">
      <label for="item_name" class="block text-16 text-gray_1 font-semibold pb-2">Varients</label>
      <mat-form-field appearance="outline" class="w-full">
        <mat-select placeholder="Select Varients" [formControlName]="'variant'">
          <!-- <mat-option #allSelected (click)="toggleAllSelection()" [value]="0">All</mat-option> -->
          <mat-option *ngFor="let item of varientsList" [value]="item._id"
          >{{item?.productId?.product_name}} -
            {{item?.sizeId?.size_name}}</mat-option>
        </mat-select>
      </mat-form-field>
      <span class="error-message block absolute bottom-0 left-2.5 text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('variant').hasError('required') && (productCouponForm.get('variant').dirty || productCouponForm.get('variant').touched)">Select variant is required.</span>
    </div>
    <div class="w-full lg:w-1/4 relative pb-6 px-2.5 pt-0">
      <label for="item_name" class="block text-16 text-gray_1 font-semibold pb-2">Maximum Limit<span class="absolute top-0 text-red_1 text-[18] font-bold">&nbsp;*</span></label>
      <input type="text" pInputText [formControlName]="'maxlimit'" class="w-full text-16 xl:text-lg border border-light_blue text-dark placeholder:text-light_blue rounded-lg outline-none py-2 xl:py-3 px-4" placeholder="Maximum Amount">
      <span class="error-message block absolute bottom-0 left-2.5 text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('maxlimit').hasError('required') && (productCouponForm.get('maxlimit').dirty || productCouponForm.get('maxlimit').touched)">Maximum amount is required.</span>
      <span class="error-message block absolute top-full -translate-y-2 left-2.5 text-xs lg:text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('maxlimit').hasError('pattern')">Please enter maximum amount in digit.</span>
    </div>
    <div class="w-full lg:w-1/4 relative pb-6 px-2.5 pt-0">
      <label for="item_name" class="block text-16 text-gray_1 font-semibold pb-2">User Limit<span class="absolute top-0 text-red_1 text-[18] font-bold">&nbsp;*</span></label>
      <mat-form-field appearance="outline" class="w-full">
        <mat-select placeholder="User Limit" [formControlName]="'userlimit'">
          <mat-option [value]="'single'">Single</mat-option>
          <mat-option [value]="'multiple'">Multiple</mat-option>
        </mat-select>
      </mat-form-field>
      <span class="error-message block absolute bottom-0 left-2.5 text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('userlimit').hasError('required') && (productCouponForm.get('userlimit').dirty || productCouponForm.get('userlimit').touched)">User Limit is required.</span>
    </div>
    <div class="w-full lg:w-1/2 relative pb-4 px-2.5 pt-0">
      <label for="item_name" class="block text-16 text-gray_1 font-semibold pb-2">Discount Type<span class="absolute top-0 text-red_1 text-[18] font-bold">&nbsp;*</span></label>
      <mat-form-field appearance="outline" class="w-full">
        <mat-select placeholder="Discount Type" [formControlName]="'discount_type'">
          <mat-option [value]="'amount'">In Amount</mat-option>
          <mat-option [value]="'percentage'">In Percentage</mat-option>
        </mat-select>
      </mat-form-field>
      <span class="error-message block absolute bottom-0 left-2.5 text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('discount_type').hasError('required') && (productCouponForm.get('discount_type').dirty || productCouponForm.get('discount_type').touched)">Discount type is required.</span>
    </div>
    <div class="w-full lg:w-1/2 relative pb-6 px-2.5 pt-0">
      <label for="item_name" class="block text-16 text-gray_1 font-semibold pb-2">Discount<span class="absolute top-0 text-red_1 text-[18] font-bold">&nbsp;*</span></label>
      <input type="text" pInputText [formControlName]="'discount'" class="w-full text-16 xl:text-lg border border-light_blue text-dark placeholder:text-light_blue rounded-lg outline-none py-2 xl:py-3 px-4" placeholder="Discount">
      <span class="error-message block absolute top-[80%] bottom-0 left-2.5 text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('discount').hasError('required') && (productCouponForm.get('discount').dirty || productCouponForm.get('discount').touched)">Discount is required.</span>
      <span class="error-message block absolute top-[80%] -translate-y-2 left-2.5 text-xs lg:text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('discount').hasError('pattern')">Please enter discount in digit.</span>
    </div>
    <div class="w-full lg:w-1/4 relative pb-6 px-2.5 pt-0">
      <label for="item_name" class="block text-16 text-gray_1 font-semibold pb-2">Start Date<span class="absolute top-0 text-red_1 text-[18] font-bold">&nbsp;*</span></label>
      <mat-form-field class="example-full-width w-full mt-0" appearance="outline" color="primary">
        <input matInput
        [matDatepicker]="picker" [formControlName]="'starttime'" (click)="picker.open()"
         placeholder="Start Date">
        <span matSuffix>
          <mat-datepicker-toggle [for]="picker"></mat-datepicker-toggle>
        </span>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <span class="error-message block absolute top-[80%] bottom-0 left-2.5 text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('starttime').hasError('required') && (productCouponForm.get('starttime').dirty || productCouponForm.get('starttime').touched)">Start Date is required.</span>
    </div>
    <div class="w-full lg:w-1/4 relative pb-6 px-2.5 pt-0">
      <label for="item_name" class="block text-16 text-gray_1 font-semibold pb-2">End Date<span class="absolute top-0 text-red_1 text-[18] font-bold">&nbsp;*</span></label>
      <mat-form-field class="example-full-width w-full mt-0" appearance="outline" color="primary">
        <input matInput
        [matDatepicker]="picker1" [formControlName]="'endtime'" (click)="picker1.open()"
         placeholder="End Date">
        <span matSuffix>
          <mat-datepicker-toggle [for]="picker1"></mat-datepicker-toggle>
        </span>
        <mat-datepicker #picker1></mat-datepicker>
      </mat-form-field>
      <span class="error-message block absolute top-[80%] bottom-0 left-2.5 text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('endtime').hasError('required') && (productCouponForm.get('endtime').dirty || productCouponForm.get('endtime').touched)">End Date is required.</span>
    </div>
    <div class="w-full lg:w-1/4 relative pb-4 px-2.5 pt-0 flex">
      <div class="mr-6">
        <label for="price"
          class="block text-gray_4 font-semibold text-base xl:text-lg whitespace-nowrap cursor-pointer lg:mb-3">Web
          View</label>
        <div class="flex items-center mt-1">
          <p-inputSwitch formControlName="webview"></p-inputSwitch>
        </div>
      </div>
      <div class="mr-6">
        <label for="price"
          class="block text-gray_4 font-semibold text-base xl:text-lg whitespace-nowrap cursor-pointer lg:mb-3">Mobile
          View</label>
        <div class="flex items-center mt-1">
          <p-inputSwitch formControlName="mobileview"></p-inputSwitch>
        </div>
      </div>
    </div>
    <div class="w-full lg:w-1/2 relative pb-6 px-2.5 pt-0">
      <label for="item_name" class="block text-16 text-gray_1 font-semibold pb-2">Coupon Brief<span class="absolute top-0 text-red_1 text-[18] font-bold">&nbsp;*</span></label>
      <mat-form-field class="w-full terms-condition mt-0" appearance="outline" color="primary">
        <textarea [formControlName]="'brief'" matInput name="questionText"
          placeholder="Type Here Brief..." class="w-full text-16 xl:text-lg border border-light_blue text-dark placeholder:text-light_blue rounded-lg outline-none py-2 xl:py-4 px-4"></textarea>
        </mat-form-field>
        <span class="error-message block absolute bottom-0 left-2.5 text-sm font-semibold text-primary-error" *ngIf="productCouponForm.get('brief').hasError('required') && (productCouponForm.get('brief').dirty || productCouponForm.get('brief').touched)">Coupon brief is required.</span>
    </div>
    <div class="w-full lg:w-1/2 pb-6 px-2.5 pt-0">
      <label for="expenses_image" class="block relative text-16 text-gray_1 font-semibold pb-2">Coupon Banner</label>
      <div class="w-full h-[126px] relative group">
        <div class="w-full h-full absolute inset-x-0 z-30 bg-black/40 hidden rounded-3xl" [ngClass]="selectedItemImg ? 'group-hover:block' : 'hidden'">
          <div class="flex items-center space-x-3 absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 z-10" *ngIf="selectedItemImg">
            <div class="">
              <input type="file" name="expenses_image" id="coupon_image" class="hidden" [multiple]="false" [accept]="'image/jpeg, image/png'" (change)="uploadItemImage($event)">
              <label for="expenses_image" class="block cursor-pointer"><span class="icon-camera text-xl text-white"></span></label>
            </div>
            <button mat-icon-button>
              <span class="block icon-delete text-white text-xl" (click)="removeFillAvatar()"></span>
            </button>
          </div>
        </div>
        <div class="w-full h-full absolute inset-x-0 flex items-center justify-center z-20" [ngClass]="{'opacity-0' : selectedItemImg}">
          <div class="w-full">
            <input type="file" name="expenses_image" id="expenses_image" class="hidden" [multiple]="false" [accept]="'image/avif,image/webp, image/png, image/jpeg, image/gif, image/bmp, image/vnd.microsoft.icon, image/tiff, image/svg+xml'" (change)="uploadItemImage($event)">
            <label for="expenses_image" class="block cursor-pointer">
              <div class="w-full text-center bg-gray_4 border-2 border-dashed border-gray_2 rounded-3xl p-11">
                <span class="icon-camera text-3xl text-gray_2"></span>
              </div>
            </label>
          </div>
        </div>
        <div class="w-full h-full bg-gray_4 border-2 border-dashed border-primary overflow-hidden rounded-3xl relative z-[1] mt-0" *ngIf="selectedItemImg">
          <img class="object-cover w-full h-full" [src]=" !isUpload ? constants.baseImageUrl + selectedItemImg : constants.baseImageUrl + selectedItemImg">
        </div>
      </div>
    </div>
    <div class="w-full relative p-4 pb-0">
      <label for="photoAndvideo_description"
        class="block text-gray_4 font-semibold text-base xl:text-lg cursor-pointer pb-1.5">Term & Condition</label>
      <div class="w-full relative pb-5">
        <div
          class="NgxEditor__Wrapper flex flex-col h-80 overflow-y-auto border border-black/20 product_details">
          <ngx-editor-menu [editor]="editor" [toolbar]="toolbar" class="">
          </ngx-editor-menu>
          <ngx-editor formControlName="tc" [editor]="editor"
            [disabled]="tremCondition_length > 10000" [placeholder]="'Type here...'"
            (ngModelChange)="ingredientLength($event)"></ngx-editor>
        </div>
        <!-- <span class="error-message block absolute bottom-0 left-0 text-sm font-semibold text-primary-error"
          *ngIf="productCouponForm.get('tc').hasError('required') && (productCouponForm.get('tc').dirty || productCouponForm.get('tc').touched)">*Product
          ingredients is required.</span>
        <span class="error-message block absolute bottom-0 left-0 text-sm font-semibold text-primary-error"
          *ngIf="productCouponForm.get('tc').hasError('maxlength')">*You can not write more poroduct
          ingredients.</span> -->
      </div>  
    </div>

    <!-- <div class="w-full flex items-center justify-center">
      <button type="button" mat-flat-button (click)="onSubmitAction()" class="flex items-center border-2 border-primary rounded-lg px-6 py-2 outline-none bg-primary hover:bg-white anim group">
        <span class="text-base font-medium leading-[22px] text-white group-hover:text-primary anim">{{couponId != "coupondetail" ? "Edit" : "Add"}} Coupon</span>
        <span class="block" *ngIf="isBtnLoading">
          <svg class="animate-spin -mr-1 ml-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25 stroke-white group-hover:stroke-primary anim" cx="12" cy="12" r="10" stroke-width="4"></circle> <path class="opacity-75 fill-white group-hover:fill-primary anim" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg>
        </span>
      </button>
    </div> -->
  </form>
</div>

